{% extends 'films/base.html' %}

{% block title %}{{ award.name }} ({{ award.year }}){% endblock %}

{% block content %}
<h1>{{ award.name }} ({{ award.year }})</h1>

<div class="mb-3">
    {% if user.is_superuser %}
        <a href="{% url 'films:award_update' award.id %}" class="btn btn-outline-secondary me-1">Изменить</a>
        <a href="{% url 'films:award_delete' award.id %}" class="btn btn-outline-danger">Удалить</a>
    {% endif %}
</div>

<h2>Номинации:</h2>
{% if nominations %}
    <ul class="list-group">
        {% for nomination in nominations %}
            <li class="list-group-item">
                <a href="{% url 'films:nomination_detail' nomination.id %}">{{ nomination.name }}</a>
                <ul>
                    {% for result in nomination.results.all %}
                        <li>
                            {% if result.is_won %}
                                <strong>Победитель:</strong>
                            {% else %}
                                Номинант:
                            {% endif %}
                            {% if result.person %}
                                <a href="{% url 'films:person_detail' result.person.id %}">{{ result.person.name }}</a>
                            {% elif result.film %}
                                <a href="{% url 'films:film_detail' result.film.id %}">{{ result.film.name }}</a>
                            {% else %}
                                Неизвестный
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-muted">Нет номинаций для этой премии.</p>
{% endif %}

{% if user.is_superuser %}
    <a href="{% url 'films:nomination_create' %}?award={{ award.id }}" class="btn btn-primary mt-2">Добавить номинацию</a>
{% endif %}

{% endblock %}